![deploy workflow](https://github.com/CORCTON/EchoMe/actions/workflows/deploy.yml/badge.svg)
[![zread](https://img.shields.io/badge/Ask_Zread-_.svg?style=flat-square&color=00b0aa&labelColor=000000&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQuOTYxNTYgMS42MDAxSDIuMjQxNTZDMS44ODgxIDEuNjAwMSAxLjYwMTU2IDEuODg2NjQgMS42MDE1NiAyLjI0MDFWNC45NjAxQzEuNjAxNTYgNS4zMTM1NiAxLjg4ODEgNS42MDAxIDIuMjQxNTYgNS42MDAxSDQuOTYxNTZDNS4zMTUwMiA1LjYwMDEgNS42MDE1NiA1LjMxMzU2IDUuNjAxNTYgNC45NjAxVjIuMjQwMUM1LjYwMTU2IDEuODg2NjQgNS4zMTUwMiAxLjYwMDEgNC45NjE1NiAxLjYwMDFaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00Ljk2MTU2IDEwLjM5OTlIMi4yNDE1NkMxLjg4ODEgMTAuMzk5OSAxLjYwMTU2IDEwLjY4NjQgMS42MDE1NiAxMS4wMzk5VjEzLjc1OTlDMS42MDE1NiAxNC4xMTM0IDEuODg4MSAxNC4zOTk5IDIuMjQxNTYgMTQuMzk5OUg0Ljk2MTU2QzUuMzE1MDIgMTQuMzk5OSA1LjYwMTU2IDE0LjExMzQgNS42MDE1NiAxMy43NTk5VjExLjAzOTlDNS42MDE1NiAxMC42ODY0IDUuMzE1MDIgMTAuMzk5OSA0Ljk2MTU2IDEwLjM5OTlaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik0xMy43NTg0IDEuNjAwMUgxMS4wMzg0QzEwLjY4NSAxLjYwMDEgMTAuMzk4NCAxLjg4NjY0IDEwLjM5ODQgMi4yNDAxVjQuOTYwMUMxMC4zOTg0IDUuMzEzNTYgMTAuNjg1IDUuNjAwMSAxMS4wMzg0IDUuNjAwMUgxMy43NTg0QzE0LjExMTkgNS42MDAxIDE0LjM5ODQgNS4zMTM1NiAxNC4zOTg0IDQuOTYwMVYyLjI0MDFDMTQuMzk4NCAxLjg4NjY0IDE0LjExMTkgMS42MDAxIDEzLjc1ODQgMS42MDAxWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNNCAxMkwxMiA0TDQgMTJaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00IDEyTDEyIDQiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K&logoColor=ffffff)](https://zread.ai/CORCTON/EchoMe)

<img width="9050" height="2849" alt="EchoMe" src="https://github.com/user-attachments/assets/b92c1c49-339b-43b5-8161-08d7b740ff54" />

# EchoMe - æ™ºèƒ½è¯­éŸ³AIåŠ©æ‰‹

## ğŸ¬ æ¼”ç¤ºè§†é¢‘

**[ğŸ“º è§‚çœ‹å®Œæ•´æ¼”ç¤ºè§†é¢‘](https://www.bilibili.com/video/BV1UEndzgEoQ/?vd_source=7e1f5ea5ff766d3e31b7bedb3cf5f6fe)**

ä½“éªŒ EchoMe çš„å®æ—¶è¯­éŸ³äº¤äº’ã€å¤šæ¨¡æ€å†…å®¹ç†è§£å’Œæ™ºèƒ½è§’è‰²å¯¹è¯åŠŸèƒ½ã€‚

---

## ğŸ‘¥ å›¢é˜Ÿåˆ†å·¥

- **@CORCTON (CRT)** - æ•´ä½“ä¸šåŠ¡æ¶æ„è®¾è®¡ã€å‰ç«¯å¼€å‘
- **@Rson9 (LJX)** - åç«¯æ¶æ„å¼€å‘ã€Demoè§†é¢‘å½•åˆ¶

---

## ğŸ¯ äº§å“å®šä½ä¸ç”¨æˆ·æ•…äº‹

### ç›®æ ‡ç”¨æˆ·ç¾¤ä½“

**1. è·¨è¯­è¨€æ²Ÿé€šéœ€æ±‚ç”¨æˆ·**
- **æ ¸å¿ƒèƒ½åŠ›åŒ¹é…**: å®æ—¶ç¿»è¯‘ + VADè¯­éŸ³æ£€æµ‹ + å®æ—¶ç¿»è¯‘å®˜è§’è‰²
- **ç—›ç‚¹**: éœ€è¦è¿›è¡Œå¤šè¯­è¨€å®æ—¶æ²Ÿé€šï¼Œä¼ ç»Ÿç¿»è¯‘å·¥å…·å»¶è¿Ÿé«˜ã€å‡†ç¡®æ€§å·®
- **ç”¨æˆ·æ•…äº‹**: "ä½œä¸ºä¸€åå›½é™…å•†åŠ¡äººå‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿä¸å¤–å›½å®¢æˆ·è¿›è¡Œæµç•…çš„è¯­éŸ³å¯¹è¯ï¼Œå®æ—¶ç¿»è¯‘å®˜è§’è‰²å¸®æˆ‘å‡†ç¡®ä¼ è¾¾å•†åŠ¡æ„å›¾ï¼ŒVADæŠ€æœ¯ç¡®ä¿å¯¹è¯è‡ªç„¶æµç•…"

**2. æ±‚èŒé¢è¯•å‡†å¤‡ç”¨æˆ·**
- **æ ¸å¿ƒèƒ½åŠ›åŒ¹é…**: è§’è‰²æ‰®æ¼” + è”ç½‘æœç´¢ + å›¾åƒè¯†åˆ« + æ¨¡æ‹Ÿé¢è¯•è§’è‰²
- **ç—›ç‚¹**: ç¼ºä¹çœŸå®é¢è¯•ç»ƒä¹ æœºä¼šï¼Œæ— æ³•è·å¾—åŠæ—¶åé¦ˆå’Œæœ€æ–°è¡Œä¸šä¿¡æ¯
- **ç”¨æˆ·æ•…äº‹**: "ä½œä¸ºä¸€åæ±‚èŒè€…ï¼Œæˆ‘å¸Œæœ›é€šè¿‡æ¨¡æ‹Ÿé¢è¯•è§’è‰²è¿›è¡ŒçœŸå®çš„è¯­éŸ³é¢è¯•ç»ƒä¹ ï¼ŒAIèƒ½è”ç½‘è·å–æœ€æ–°è¡Œä¸šåŠ¨æ€ï¼Œåˆ†ææˆ‘ä¸Šä¼ çš„ç®€å†æ–‡æ¡£ï¼Œç»™å‡ºé’ˆå¯¹æ€§å»ºè®®"

**3. å­¦ä¹ ç ”ç©¶ç”¨æˆ·**
- **æ ¸å¿ƒèƒ½åŠ›åŒ¹é…**: å›¾åƒè¯†åˆ« + è”ç½‘æœç´¢ + è‹æ ¼æ‹‰åº•/åŠ©ç†ç ”ç©¶å‘˜è§’è‰²
- **ç—›ç‚¹**: éœ€è¦æ·±åº¦ç†è§£å¤æ‚å­¦æœ¯ææ–™ï¼Œç¼ºä¹å¯å‘å¼å­¦ä¹ æŒ‡å¯¼
- **ç”¨æˆ·æ•…äº‹**: "ä½œä¸ºä¸€åç ”ç©¶ç”Ÿï¼Œæˆ‘å¸Œæœ›è‹æ ¼æ‹‰åº•è§’è‰²é€šè¿‡å¯å‘å¼æé—®å¸®æˆ‘æ·±åº¦æ€è€ƒï¼ŒåŠ©ç†ç ”ç©¶å‘˜è§’è‰²å¸®æˆ‘åˆ†æPDFè®ºæ–‡å›¾è¡¨ï¼Œè”ç½‘æœç´¢æœ€æ–°ç ”ç©¶è¿›å±•"

**4. å¨±ä¹äº’åŠ¨ç”¨æˆ·**
- **æ ¸å¿ƒèƒ½åŠ›åŒ¹é…**: è§’è‰²æ‰®æ¼” + å®æ—¶è¯­éŸ³äº¤äº’ + å“ˆåˆ©æ³¢ç‰¹ç­‰å¨±ä¹è§’è‰²
- **ç—›ç‚¹**: ç¼ºä¹æ²‰æµ¸å¼å¨±ä¹ä½“éªŒï¼Œä¼ ç»ŸèŠå¤©æœºå™¨äººç¼ºä¹ä¸ªæ€§
- **ç”¨æˆ·æ•…äº‹**: "ä½œä¸ºä¸€åå“ˆåˆ©æ³¢ç‰¹ç²‰ä¸ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿä¸å“ˆåˆ©æ³¢ç‰¹è§’è‰²è¿›è¡ŒçœŸå®çš„è¯­éŸ³å¯¹è¯ï¼Œä½“éªŒé­”æ³•ä¸–ç•Œçš„æ²‰æµ¸å¼äº¤äº’"

**5. æ—¥å¸¸åŠå…¬åŠ©æ‰‹ç”¨æˆ·**
- **æ ¸å¿ƒèƒ½åŠ›åŒ¹é…**: è”ç½‘æœç´¢ + å›¾åƒè¯†åˆ« + VADè¯­éŸ³æ£€æµ‹ + é€šç”¨åŠ©æ‰‹è§’è‰²
- **ç—›ç‚¹**: éœ€è¦é«˜æ•ˆå¤„ç†å¤šç§åŠå…¬ä»»åŠ¡ï¼Œä¼ ç»Ÿå·¥å…·åˆ‡æ¢æˆæœ¬é«˜
- **ç”¨æˆ·æ•…äº‹**: "ä½œä¸ºä¸€ååŠå…¬äººå‘˜ï¼Œæˆ‘å¸Œæœ›é€šç”¨åŠ©æ‰‹è§’è‰²èƒ½å¤Ÿå¸®æˆ‘å¤„ç†æ–‡æ¡£åˆ†æã€ä¿¡æ¯æŸ¥è¯¢ã€ä¼šè®®è®°å½•ç­‰å¤šç§ä»»åŠ¡ï¼Œé€šè¿‡è¯­éŸ³äº¤äº’æé«˜å·¥ä½œæ•ˆç‡"

### æ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆçº§

**P0 (æ ¸å¿ƒåŠŸèƒ½)**
- å®æ—¶è¯­éŸ³å¯¹è¯ - åŸºç¡€äº¤äº’èƒ½åŠ›
- å¤šæ¨¡æ€å†…å®¹ç†è§£ - æ–‡æ¡£/å›¾åƒåˆ†æ
- è”ç½‘æœç´¢å¢å¼º - å®æ—¶ä¿¡æ¯è·å–

**P1 (é‡è¦åŠŸèƒ½)**
- å¤šè§’è‰²è¯­éŸ³ç³»ç»Ÿ - ä¸ªæ€§åŒ–ä½“éªŒ
- VADå®æ—¶è¯­éŸ³æ£€æµ‹ - äº¤äº’ä½“éªŒä¼˜åŒ–
- å®æ—¶ç¿»è¯‘ - å¤šè¯­è¨€æ”¯æŒ

**P2 (å¢å¼ºåŠŸèƒ½)**
- å›¾åƒè¯†åˆ« - æ‰©å±•ç†è§£èƒ½åŠ›
- è§’è‰²å®šåˆ¶ - ä¸ªæ€§åŒ–å®šåˆ¶

### æœ¬æ¬¡å¼€å‘åŠŸèƒ½

æœ¬æ¬¡é‡ç‚¹å¼€å‘ **P0 å’Œ P1 çº§åˆ«åŠŸèƒ½**ï¼Œæ„å»ºå®Œæ•´çš„è¯­éŸ³AIäº¤äº’ä½“éªŒï¼Œä¸ºç”¨æˆ·æä¾›æ™ºèƒ½ã€é«˜æ•ˆçš„å¤šæ¨¡æ€å¯¹è¯åŠ©æ‰‹ã€‚

### LLM æ¨¡å‹é€‰æ‹©

**é€‰æ‹©**: é˜¿é‡Œäº‘é€šä¹‰åƒé—®ç³»åˆ—æ¨¡å‹

**å¯¹æ¯”åˆ†æ**:
- **OpenAI GPT-4**: èƒ½åŠ›å¼ºä½†æˆæœ¬é«˜ï¼ŒAPIç¨³å®šæ€§åœ¨å›½å†…å­˜åœ¨é—®é¢˜
- **ç™¾åº¦æ–‡å¿ƒä¸€è¨€**: ä¸­æ–‡ä¼˜åŒ–å¥½ï¼Œä½†å¤šæ¨¡æ€èƒ½åŠ›ç›¸å¯¹è¾ƒå¼±
- **é˜¿é‡Œäº‘é€šä¹‰åƒé—®**: æ€§ä»·æ¯”é«˜ï¼Œå¤šæ¨¡æ€èƒ½åŠ›å¼ºï¼Œå›½å†…è®¿é—®ç¨³å®š

**é€‰æ‹©ç†ç”±**:
1. **æˆæœ¬æ•ˆç›Š**: ç›¸æ¯”GPT-4ä»·æ ¼æ›´ä¼˜ï¼Œé€‚åˆé«˜é¢‘è¯­éŸ³äº¤äº’åœºæ™¯
2. **å¤šæ¨¡æ€èƒ½åŠ›**: åŸç”Ÿæ”¯æŒå›¾åƒç†è§£ï¼Œæ»¡è¶³æ–‡æ¡£åˆ†æéœ€æ±‚
3. **æœåŠ¡ç¨³å®šæ€§**: å›½å†…éƒ¨ç½²ï¼Œç½‘ç»œå»¶è¿Ÿä½ï¼ŒæœåŠ¡å¯é æ€§é«˜
4. **ç”Ÿæ€æ•´åˆ**: ä¸é˜¿é‡Œäº‘ASR/TTSæœåŠ¡æ·±åº¦æ•´åˆï¼ŒæŠ€æœ¯æ ˆç»Ÿä¸€

### AIè§’è‰²æ‰©å±•æŠ€èƒ½

é™¤è¯­éŸ³èŠå¤©å¤–ï¼ŒAIè§’è‰²è¿˜å…·å¤‡ï¼š

- **ğŸ“š çŸ¥è¯†ç®¡ç†**: æ–‡æ¡£è§£æã€ä¿¡æ¯æå–ã€çŸ¥è¯†å›¾è°±æ„å»º
- **ğŸ” å®æ—¶æœç´¢**: è”ç½‘è·å–æœ€æ–°ä¿¡æ¯ï¼Œä¿æŒçŸ¥è¯†æ—¶æ•ˆæ€§
- **ğŸŒ å¤šè¯­è¨€å¤„ç†**: å®æ—¶ç¿»è¯‘ã€è·¨è¯­è¨€ç†è§£ä¸äº¤æµ
- **ğŸ“Š æ•°æ®åˆ†æ**: å›¾è¡¨è¯†åˆ«ã€æ•°æ®è§£è¯»ã€è¶‹åŠ¿åˆ†æ
- **ğŸ¨ åˆ›æ„åä½œ**: å†…å®¹åˆ›ä½œã€å¤´è„‘é£æš´ã€åˆ›æ„æ¿€å‘
- **ğŸ“ æ–‡æ¡£å¤„ç†**: PDFè§£æã€å†…å®¹æ€»ç»“ã€è¦ç‚¹æå–
- **ğŸ¤– ä¸ªæ€§åŒ–å®šåˆ¶**: æ ¹æ®ç”¨æˆ·åå¥½è°ƒæ•´äº¤äº’é£æ ¼å’Œä¸“ä¸šé¢†åŸŸ

---

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### ğŸ™ï¸ å®æ—¶è¯­éŸ³äº¤äº’
- **VADå®æ—¶è¯­éŸ³æ£€æµ‹**: ONNXæ¨¡å‹ç²¾ç¡®æ£€æµ‹è¯­éŸ³æ´»åŠ¨è¾¹ç•Œ
- **æµå¼ASRè¯†åˆ«**: ç‹¬ç«‹WebSocketé€šé“å¤„ç†å®æ—¶è¯­éŸ³è½¬æ–‡å­—
- **Real-time TTSåˆæˆ**: é«˜è´¨é‡è¯­éŸ³åˆæˆï¼Œæ”¯æŒè§’è‰²è¯­éŸ³å…‹éš†
- **åŒå‘æµå¼é€šä¿¡**: éŸ³é¢‘å’Œæ–‡æœ¬åŒå‘å®æ—¶ä¼ è¾“

### ğŸŒ è”ç½‘æœç´¢å¢å¼º
- **Tavily APIé›†æˆ**: å®æ—¶è·å–ç½‘ç»œæœ€æ–°ä¿¡æ¯
- **ä¸Šä¸‹æ–‡è‡ªåŠ¨èåˆ**: æœç´¢ç»“æœæ™ºèƒ½æ•´åˆåˆ°å¯¹è¯ä¸­
- **çŸ¥è¯†å®æ—¶æ›´æ–°**: ä¸ºAIè§’è‰²æä¾›æœ€æ–°ä¿¡æ¯è·å–èƒ½åŠ›

### ğŸ“„ å¤šæ¨¡æ€å†…å®¹ç†è§£
- **PDFæ™ºèƒ½è§£æ**: PDF.jså¼•æ“è½¬æ¢æ–‡æ¡£ä¸ºé«˜æ¸…å›¾åƒ
- **å›¾åƒè¯†åˆ«åˆ†æ**: å¤šæ¨¡æ€å¤§æ¨¡å‹ç†è§£å›¾åƒå†…å®¹
- **æ–‡æ¡£ç»“æ„æå–**: è‡ªåŠ¨è¯†åˆ«æ–‡å­—ã€å›¾è¡¨ã€è¡¨æ ¼ç­‰å…ƒç´ 
- **çŸ¥è¯†æ•´åˆ**: æå–å†…å®¹èå…¥å¯¹è¯ä¸Šä¸‹æ–‡

### ğŸŒ å®æ—¶ç¿»è¯‘
- **å¤šè¯­è¨€è¯­éŸ³è¯†åˆ«**: æ”¯æŒä¸­è‹±æ–‡ç­‰å¤šç§è¯­è¨€è¾“å…¥
- **æ™ºèƒ½è¯­è¨€æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«è¾“å…¥è¯­è¨€å¹¶åˆ‡æ¢
- **å®æ—¶ç¿»è¯‘è¾“å‡º**: æ”¯æŒå¤šè¯­è¨€æ–‡æœ¬å’Œè¯­éŸ³è¾“å‡º

### ğŸ­ å¤šè§’è‰²è¯­éŸ³ç³»ç»Ÿ
- **è§’è‰²ä¸ªæ€§å®šåˆ¶**: å¯é…ç½®å¤šä¸ªAIè§’è‰²ï¼Œå„å…·ç‰¹è‰²
- **è¯­éŸ³å…‹éš†æŠ€æœ¯**: é˜¿é‡Œäº‘TTSå®ç°è§’è‰²ä¸“å±è¯­éŸ³
- **è§’è‰²è½®æ’­é€‰æ‹©**: ç›´è§‚çš„è§’è‰²é€‰æ‹©å’Œåˆ‡æ¢ç•Œé¢
- **ç‹¬ç«‹å¯¹è¯å†å²**: æ¯ä¸ªè§’è‰²ç»´æŠ¤ç‹¬ç«‹çš„å¯¹è¯è®°å½•

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„æ¦‚è§ˆ
```mermaid
graph TB
    subgraph "æµè§ˆå™¨ç¯å¢ƒ"
        subgraph "è¡¨ç°å±‚ - Next.js App Router"
            UI[React ç»„ä»¶å±‚]
            ROUTE[è·¯ç”±ä¸é¡µé¢]
            INTL[å›½é™…åŒ–å±‚ next-intl]
        end
        
        subgraph "çŠ¶æ€ç®¡ç†å±‚"
            ZUSTAND[Zustand çŠ¶æ€æ ‘]
            QUERY[TanStack Query ç¼“å­˜]
            PERSIST[IndexedDB æŒä¹…åŒ–]
        end
        
        subgraph "æœåŠ¡å±‚"
            API_SERVICE[HTTP API æœåŠ¡]
            WS_SERVICE[WebSocket æœåŠ¡]
            UPLOAD[æ–‡ä»¶ä¸Šä¼ æœåŠ¡]
        end
        subgraph "åª’ä½“å¤„ç†å±‚"
            VAD[ONNX VAD å¼•æ“]
            PDFJS[PDF.js æ–‡æ¡£å¤„ç†]
            AUDIO[Web Audio API]
            OSS_CLIENT[é˜¿é‡Œäº‘ OSS å®¢æˆ·ç«¯]
        end
    end
    
    subgraph "ç½‘ç»œé€šä¿¡å±‚"
        HTTP[RESTful API]
        WS[WebSocket å®æ—¶é€šä¿¡]
    end
    
    subgraph "åç«¯æœåŠ¡ - æ´‹è‘±æ¶æ„"
        subgraph "åº”ç”¨å±‚ - Application"
            APP[Echo HTTP æœåŠ¡å™¨]
            MW[ä¸­é—´ä»¶æ ˆ]
            VALID[é…ç½®éªŒè¯å™¨]
        end
        
        subgraph "æ§åˆ¶å±‚ - Handlers"
            CHAR_HANDLER[è§’è‰²æ§åˆ¶å™¨]
            WS_HANDLER[WebSocket æ§åˆ¶å™¨]
            ROUTE_HANDLER[è·¯ç”±ç®¡ç†å™¨]
        end
        
        subgraph "é¢†åŸŸå±‚ - Domain"
            CHAR_SERVICE[è§’è‰²æœåŠ¡]
            CONV_SERVICE[å¯¹è¯æœåŠ¡]
            AI_SERVICE[AI æœåŠ¡æ¥å£]
        end
        
        subgraph "åŸºç¡€è®¾æ–½å±‚ - Infrastructure"
            CHAR_REPO[è§’è‰²ä»“å‚¨]
            DB_CONN[GORM æ•°æ®åº“è¿æ¥]
            ALI_CLIENT[é˜¿é‡Œäº‘å®¢æˆ·ç«¯]
            WS_HUB[WebSocket è¿æ¥æ± ]
        end
    end
    
    subgraph "å¤–éƒ¨æœåŠ¡"
        POSTGRES[(PostgreSQL æ•°æ®åº“)]
        ALI_ASR[é˜¿é‡Œäº‘ ASR]
        ALI_TTS[é˜¿é‡Œäº‘ TTS] 
        ALI_LLM[é˜¿é‡Œäº‘ LLM]
        ALI_OSS[é˜¿é‡Œäº‘ OSS]
        TAVILY[Tavily æœç´¢ API]
    end
    
    %% å‰ç«¯å†…éƒ¨è¿æ¥
    UI --> ZUSTAND
    UI --> QUERY
    ROUTE --> API_SERVICE
    API_SERVICE --> HTTP
    WS_SERVICE --> WS
    VAD --> AUDIO
    PDFJS --> UPLOAD
    UPLOAD --> OSS_CLIENT
    OSS_CLIENT --> ALI_OSS
    
    %% ç½‘ç»œè¿æ¥
    HTTP --> APP
    WS --> WS_HANDLER
    
    %% åç«¯å†…éƒ¨è¿æ¥ (Wire DI)
    APP --> CHAR_HANDLER
    APP --> WS_HANDLER
    CHAR_HANDLER --> CHAR_SERVICE
    WS_HANDLER --> CONV_SERVICE
    CHAR_SERVICE --> CHAR_REPO
    CONV_SERVICE --> AI_SERVICE
    AI_SERVICE --> ALI_CLIENT
    CHAR_REPO --> DB_CONN
    WS_HANDLER --> WS_HUB
    
    %% å¤–éƒ¨æœåŠ¡è¿æ¥
    DB_CONN --> POSTGRES
    ALI_CLIENT --> ALI_ASR
    ALI_CLIENT --> ALI_TTS
    ALI_CLIENT --> ALI_LLM
    AI_SERVICE --> TAVILY
```

#### æ ¸å¿ƒæŠ€æœ¯ç‰¹æ€§
- **WebSocketåŒé€šé“**: ASRè¯†åˆ«å’Œä¸»è¦æ•°æ®ä¼ è¾“åˆ†ç¦»å¤„ç†
- **å®æ—¶æµå¤„ç†**: LLMæ–‡æœ¬æµå’ŒTTSéŸ³é¢‘æµçš„å¹¶è¡Œå¤„ç†æ¶æ„
- **å‰ç«¯å¤šåª’ä½“**: PDF.jsè½¬æ¢ã€OSSç›´ä¼ ã€Web AudioéŸ³é¢‘å¤„ç†
- **å¤šæ¨¡æ€AI**: é›†æˆå›¾åƒè¯†åˆ«ã€è”ç½‘æœç´¢ã€å®æ—¶è¯­éŸ³åˆæˆ
- **æµå¼å“åº”**: æ‰€æœ‰AIæœåŠ¡éƒ½é‡‡ç”¨æµå¼å¤„ç†ï¼Œæœ€å°åŒ–å»¶è¿Ÿ

### æ ¸å¿ƒæ•°æ®æµä¸é€šä¿¡æ¨¡å¼

#### å®æ—¶è¯­éŸ³å¯¹è¯æ¶æ„
```mermaid
sequenceDiagram
    participant U as å‰ç«¯ç•Œé¢
    participant V as VADå¼•æ“
    participant WS1 as WebSocket(ASR)
    participant BE as åç«¯æœåŠ¡
    participant ASR as é˜¿é‡Œäº‘ASR
    participant LLM as å¤§è¯­è¨€æ¨¡å‹
    participant TTS as Real-time TTS
    participant WS2 as WebSocket(ä¸»é€šé“)
    participant TAV as Tavilyæœç´¢
    participant MM as å¤šæ¨¡æ€æ¨¡å‹
    
    Note over U,MM: ğŸ¤ å®æ—¶è¯­éŸ³è¯†åˆ«æµç¨‹
    U->>V: ç”¨æˆ·å¼€å§‹è¯´è¯
    V->>V: ONNX VAD æ£€æµ‹è¯­éŸ³æ´»åŠ¨
    V->>WS1: å‘é€éŸ³é¢‘å¸§ (PCM)
    WS1->>BE: è½¬å‘éŸ³é¢‘æ•°æ®
    BE->>ASR: è°ƒç”¨é˜¿é‡Œäº‘å®æ—¶ASR
    ASR-->>BE: è¿”å›å¢é‡è¯†åˆ«æ–‡æœ¬
    BE-->>WS1: è½¬å‘ASRç»“æœ
    WS1-->>U: å®æ—¶æ˜¾ç¤ºè¯†åˆ«æ–‡æœ¬
    
    Note over U,MM: ğŸ§  LLMå¤„ç†ä¸å®æ—¶TTS
    U->>WS2: å‘é€å®Œæ•´å¯¹è¯è¯·æ±‚
    WS2->>BE: æ¥æ”¶ç”¨æˆ·æ–‡æœ¬
    BE->>TAV: è”ç½‘æœç´¢å¢å¼ºä¸Šä¸‹æ–‡
    TAV-->>BE: è¿”å›æœç´¢ç»“æœ
    BE->>LLM: å‘é€å¢å¼ºåçš„Prompt
    
    loop LLMæµå¼è¾“å‡º
        LLM-->>BE: è¾“å‡ºæ–‡æœ¬tokenæµ
        par åŒè·¯å®æ—¶è½¬å‘
            BE-->>WS2: è½¬å‘æ–‡æœ¬æµç»™å‰ç«¯
            BE->>TTS: åŒæ—¶å‘é€ç»™Real-time TTS
        end
        WS2-->>U: å®æ—¶æ˜¾ç¤ºAIå›å¤æ–‡æœ¬
        TTS-->>BE: è¿”å›éŸ³é¢‘äºŒè¿›åˆ¶æµ
        BE-->>WS2: è½¬å‘éŸ³é¢‘æµ
        WS2-->>U: å®æ—¶æ’­æ”¾åˆæˆè¯­éŸ³
    end
    
    Note over U,MM: ğŸ“„ å¤šæ¨¡æ€å†…å®¹å¤„ç†
    U->>U: PDF.jsè½¬æ¢æ–‡æ¡£ä¸ºå›¾åƒ
    U->>OSS: ç›´æ¥ä¸Šä¼ å›¾åƒæ–‡ä»¶
    U->>WS2: å‘é€å›¾åƒåˆ†æè¯·æ±‚
    WS2->>BE: è½¬å‘å›¾åƒæ•°æ®
    BE->>MM: è°ƒç”¨å¤šæ¨¡æ€å¤§æ¨¡å‹
    MM-->>BE: è¿”å›å›¾åƒç†è§£ç»“æœ
    BE-->>WS2: è½¬å‘åˆ†æç»“æœ
    WS2-->>U: æ˜¾ç¤ºå›¾åƒç†è§£å†…å®¹
```

#### ç³»ç»Ÿæ ¸å¿ƒå¤„ç†æµç¨‹
```mermaid
flowchart TD
    subgraph "å‰ç«¯æ ¸å¿ƒå¤„ç†"
        A1[VAD è¯­éŸ³æ´»åŠ¨æ£€æµ‹] --> A2[éŸ³é¢‘å¸§é‡‡é›†]
        A2 --> A3[WebSocket ASRé€šé“]
        
        B1[PDF.js æ–‡æ¡£å¤„ç†] --> B2[é¡µé¢è½¬å›¾åƒ]
        B2 --> B3[ç›´æ¥ä¸Šä¼  OSS]
        
        C1[éŸ³é¢‘æµæ¥æ”¶] --> C2[Web Audio API]
        C2 --> C3[å®æ—¶éŸ³é¢‘æ’­æ”¾]
    end
    
    subgraph "åç«¯æ ¸å¿ƒå¤„ç†"
        D1[WebSocket è¿æ¥ç®¡ç†] --> D2[éŸ³é¢‘æ•°æ®è½¬å‘]
        D2 --> D3[é˜¿é‡Œäº‘ ASR]
        
        E1[æ–‡æœ¬æ¥æ”¶] --> E2[Tavily è”ç½‘æœç´¢]
        E2 --> E3[ä¸Šä¸‹æ–‡å¢å¼º]
        E3 --> E4[LLM å¤„ç†]
        
        F1[LLM æµå¼è¾“å‡º] --> F2[åŒè·¯å®æ—¶è½¬å‘]
        F2 --> F3[å‰ç«¯æ–‡æœ¬æµ]
        F2 --> F4[Real-time TTS]
        F4 --> F5[éŸ³é¢‘æµè½¬å‘]
        
        G1[å›¾åƒæ•°æ®] --> G2[å¤šæ¨¡æ€å¤§æ¨¡å‹]
        G2 --> G3[å›¾åƒç†è§£ç»“æœ]
    end
    
    subgraph "å¤–éƒ¨AIæœåŠ¡"
        ASR_SVC[é˜¿é‡Œäº‘ ASR]
        TTS_SVC[Real-time TTS]
        LLM_SVC[å¤§è¯­è¨€æ¨¡å‹]
        MM_SVC[å¤šæ¨¡æ€æ¨¡å‹]
        TAV_SVC[Tavily API]
        OSS_SVC[é˜¿é‡Œäº‘ OSS]
    end
    
    A3 --> D1
    D3 --> ASR_SVC
    B3 --> OSS_SVC
    E4 --> LLM_SVC
    F4 --> TTS_SVC
    G2 --> MM_SVC
    E2 --> TAV_SVC
    
    F3 --> C1
    F5 --> C1
```

### ä¸šåŠ¡æµç¨‹è¯´æ˜

#### AIè§’è‰²ç”Ÿå‘½å‘¨æœŸ
1. **è§’è‰²åˆ›å»º**: ç”¨æˆ·å®šä¹‰è§’è‰²åŸºæœ¬ä¿¡æ¯å’Œä¸ªæ€§ç‰¹å¾
2. **å±æ€§é…ç½®**: è®¾ç½®ç³»ç»Ÿæç¤ºè¯ã€è¡Œä¸ºæ¨¡å¼ã€ä¸“ä¸šé¢†åŸŸ
3. **è¯­éŸ³è®­ç»ƒ**: ä¸Šä¼ ç¤ºä¾‹éŸ³é¢‘ï¼Œè®­ç»ƒä¸“å±è¯­éŸ³æ¨¡å‹  
4. **è§’è‰²éƒ¨ç½²**: è§’è‰²å°±ç»ªï¼Œå¯å‚ä¸å¯¹è¯äº¤äº’
5. **æŒç»­ä¼˜åŒ–**: æ ¹æ®å¯¹è¯åé¦ˆè°ƒæ•´è§’è‰²è¡¨ç°

#### å®æ—¶å¯¹è¯å¤„ç†æµç¨‹
1. **è¯­éŸ³æ£€æµ‹**: å‰ç«¯VADå¼•æ“å®æ—¶æ£€æµ‹è¯­éŸ³æ´»åŠ¨è¾¹ç•Œ
2. **å®æ—¶è½¬å½•**: ç‹¬ç«‹WebSocketé€šé“è¿›è¡Œæµå¼ASRè¯†åˆ«
3. **è”ç½‘å¢å¼º**: åç«¯ä½¿ç”¨Tavily APIè·å–æœ€æ–°ä¿¡æ¯
4. **LLMå¤„ç†**: å¤§è¯­è¨€æ¨¡å‹åŸºäºè§’è‰²äººè®¾ç”Ÿæˆå›å¤
5. **åŒè·¯è½¬å‘**: LLMè¾“å‡ºæµåŒæ—¶è½¬å‘ç»™å‰ç«¯å’ŒReal-time TTS
6. **å®æ—¶åˆæˆ**: Real-time TTSç”Ÿæˆé«˜è´¨é‡éŸ³é¢‘æµ
7. **éŸ³é¢‘æ’­æ”¾**: å‰ç«¯Web Audio APIå¤„ç†éŸ³é¢‘æ’­æ”¾é€»è¾‘

#### å¤šæ¨¡æ€å†…å®¹å¤„ç†æµç¨‹
1. **æ–‡æ¡£é¢„å¤„ç†**: å‰ç«¯PDF.jså°†PDFæ–‡æ¡£è½¬æ¢ä¸ºé«˜æ¸…å›¾åƒ
2. **ç›´æ¥ä¸Šä¼ **: å›¾åƒæ–‡ä»¶ç›´æ¥ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSSå­˜å‚¨
3. **å¤šæ¨¡æ€ç†è§£**: åç«¯è°ƒç”¨å¤šæ¨¡æ€å¤§æ¨¡å‹è¿›è¡Œå›¾åƒè¯†åˆ«åˆ†æ
4. **å†…å®¹æå–**: è‡ªåŠ¨è¯†åˆ«æ–‡æ¡£ç»“æ„ã€æ–‡å­—ã€å›¾è¡¨ç­‰å…³é”®ä¿¡æ¯
5. **çŸ¥è¯†æ•´åˆ**: æå–çš„å†…å®¹èå…¥å¯¹è¯ä¸Šä¸‹æ–‡å’Œè§’è‰²çŸ¥è¯†ä½“ç³»

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯ (echome-fe)
- **Next.js 15.5.3**: App Router + React 19
- **TypeScript 5**: å®Œæ•´ç±»å‹å®‰å…¨
- **Tailwind CSS + shadcn/ui**: ç°ä»£UIç»„ä»¶ç³»ç»Ÿ
- **Zustand + TanStack Query**: çŠ¶æ€ç®¡ç†ä¸æ•°æ®ç¼“å­˜
- **Web Audio API**: éŸ³é¢‘å¤„ç†ä¸æ’­æ”¾
- **PDF.js 4.4.168**: PDFæ–‡æ¡£è§£æ
- **ONNX Runtime**: VADè¯­éŸ³æ£€æµ‹æ¨¡å‹

### åç«¯ (echome-be)
- **Go 1.24.3**: é«˜æ€§èƒ½åç«¯æœåŠ¡
- **Echo v4**: Webæ¡†æ¶ä¸WebSocketæ”¯æŒ
- **PostgreSQL + GORM**: æ•°æ®æŒä¹…åŒ–
- **Google Wire**: ä¾èµ–æ³¨å…¥
- **é˜¿é‡Œäº‘AIæœåŠ¡**: ASR/TTS/LLMé›†æˆ

### åŸºç¡€è®¾æ–½
- **Docker + Docker Compose**: å®¹å™¨åŒ–éƒ¨ç½²
- **GitHub Actions**: CI/CDè‡ªåŠ¨åŒ–
- **é˜¿é‡Œäº‘OSS**: å¯¹è±¡å­˜å‚¨æœåŠ¡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 20+
- Go 1.24+
- PostgreSQL 15+
- pnpm 9+

### å‰ç«¯å¼€å‘
```bash
cd echome-fe/
pnpm install
pnpm dev
```

### åç«¯å¼€å‘
```bash
cd echome-be/

# é…ç½®ç¯å¢ƒ
cp config/etc/config.yaml.example config/etc/config.yaml
# ç¼–è¾‘ config.yaml å¡«å…¥é…ç½®ä¿¡æ¯

# æ•°æ®åº“è¿ç§»
go run tools/migrate.go

# å¯åŠ¨æœåŠ¡
go run cmd/main/main.go
```

---

## ğŸ³ Docker éƒ¨ç½²

```bash
git clone https://github.com/CORCTON/EchoMe.git
cd EchoMe/deploy
docker-compose up -d
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
EchoMe/
â”œâ”€â”€ echome-fe/                    # Next.js å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/                      # App Router é¡µé¢
â”‚   â”œâ”€â”€ components/               # React ç»„ä»¶
â”‚   â”œâ”€â”€ store/                    # Zustand çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ services/                 # API æœåŠ¡
â”œâ”€â”€ echome-be/                    # Go åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ domain/               # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ handler/              # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â””â”€â”€ infra/                # åŸºç¡€è®¾æ–½å±‚
â”‚   â””â”€â”€ config/                   # é…ç½®ç®¡ç†
â””â”€â”€ deploy/                       # éƒ¨ç½²é…ç½®
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### å‰ç«¯ç¯å¢ƒå˜é‡
```bash
# é˜¿é‡Œäº‘ OSS é…ç½®
OSS_BUCKET=your-bucket-name
OSS_REGION=oss-cn-hangzhou
OSS_ACCESS_KEY_ID=your-access-key
OSS_ACCESS_KEY_SECRET=your-secret-key
```

### åç«¯é…ç½®æ–‡ä»¶
```yaml
server:
  port: "8080"
datebase:
  host: "localhost"
  port: "5432"
  user: "your_db_user"
  password: "your_db_password"
  db_name: "your_db_name"
ai:
  service_type: "alibailian"
  timeout: 30
  max_retries: 3
tavily:
  api_key: "your_tavily_api_key"
aliyun:
  api_key: "your-alibailian-api-key"
  endpoint: "https://dashscope.aliyuncs.com"
  region: "cn-beijing"
  asr:
    model: "paraformer-realtime-v2"
    sample_rate: 16000
    format: "pcm"
    language_hints: ["zh", "en"]
  tts:
    model: "qwen-tts-realtime"
    default_voice: "Cherry"
    sample_rate: 24000
    response_format: "pcm"
  llm:
    model: "qwen-turbo"
    temperature: 0.7
    max_tokens: 2000
```

## Docker éƒ¨ç½²

### ä½¿ç”¨ Docker Compose
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/EchoMe.git
cd EchoMe

# å¯åŠ¨æœåŠ¡
cd deploy
docker-compose up -d
```

### æ‰‹åŠ¨æ„å»ºé•œåƒ
```bash
# æ„å»ºå‰ç«¯é•œåƒ
cd echome-fe
docker build -t echome-fe .

# æ„å»ºåç«¯é•œåƒ  
cd ../echome-be
docker build -t echome-be .
```

## CI/CD éƒ¨ç½²

é¡¹ç›®æ”¯æŒ GitHub Actions è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼š

### éƒ¨ç½²é…ç½®
1. åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­é…ç½® Secretsï¼š
   - `SERVER_HOST`: æœåŠ¡å™¨åœ°å€
   - `SERVER_USER`: SSH ç”¨æˆ·å  
   - `SERVER_PASSWORD`: SSH å¯†ç 
   - `SERVER_PORT`: SSH ç«¯å£ (é»˜è®¤ 22)

2. æ¨é€åˆ° main åˆ†æ”¯è‡ªåŠ¨è§¦å‘éƒ¨ç½²
3. æ”¯æŒæ‰‹åŠ¨è§¦å‘éƒ¨ç½²ï¼šActions â†’ Deploy Frontend/Backend â†’ Run workflow

### éƒ¨ç½²ç›®å½•ç»“æ„
```
/opt/
â”œâ”€â”€ echome-fe/
â”‚   â”œâ”€â”€ current/          # å½“å‰ç‰ˆæœ¬è½¯é“¾æ¥
â”‚   â””â”€â”€ releases/         # å†å²ç‰ˆæœ¬
â””â”€â”€ echome-be/
    â”œâ”€â”€ current/          # å½“å‰ç‰ˆæœ¬è½¯é“¾æ¥  
    â””â”€â”€ releases/         # å†å²ç‰ˆæœ¬
```

## å¼€å‘å·¥å…·

### ä»£ç è´¨é‡
```bash
# å‰ç«¯ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
cd echome-fe
pnpm lint
pnpm format

# åç«¯ä»£ç æ ¼å¼åŒ–
cd echome-be  
go fmt ./...
go vet ./...
```

### API æ–‡æ¡£
åç«¯é›†æˆäº† Swagger æ–‡æ¡£ï¼Œå¯åŠ¨åè®¿é—®ï¼š
- Swagger UI: http://localhost:8080/swagger/index.html
- OpenAPI JSON: http://localhost:8080/swagger/doc.json

### æ•°æ®åº“è¿ç§»
```bash
cd echome-be
go run tools/migrate.go
```

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯: `git checkout -b feat/new-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'feat: add new feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feat/new-feature`
5. åˆ›å»º Pull Request

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…
